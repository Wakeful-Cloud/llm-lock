{
  "name": "LegalBillAI",
  "description": "AI\u2011Driven Legal Billing platform that automatically reads time\u2011entry logs, applies rate tables and client agreements, generates compliant invoices, predicts billing disputes, stores records, and emails invoices to clients.",
  "tools": [
    {
      "name": "retrieve_time_entries",
      "description": "Fetches time\u2011entry records for a given client and billing period from the firm\u2019s time\u2011keeping system and returns them as a structured JSON array.",
      "parameters": {
        "type": "object",
        "properties": {
          "client_id": {
            "type": "string",
            "description": "Unique identifier of the client (e.g., \"C-12345\")."
          },
          "billing_month": {
            "type": "string",
            "description": "Billing month in ISO format (YYYY\u2011MM), e.g., \"2025-03\"."
          }
        },
        "required": [
          "client_id",
          "billing_month"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "fetch_rate_table",
      "description": "Retrieves the applicable rate table for a client, including attorney hourly rates, discounts, and statutory caps.",
      "parameters": {
        "type": "object",
        "properties": {
          "client_id": {
            "type": "string",
            "description": "Unique identifier of the client."
          }
        },
        "required": [
          "client_id"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "fetch_client_agreement",
      "description": "Pulls the governing client\u2011service agreement that defines billing rules, approved expense types, and invoicing frequency.",
      "parameters": {
        "type": "object",
        "properties": {
          "client_id": {
            "type": "string",
            "description": "Unique identifier of the client."
          }
        },
        "required": [
          "client_id"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "calculate_invoice",
      "description": "Applies the rate table and agreement rules to the time\u2011entry list and produces a detailed invoice data structure with line items, taxes, and total amounts.",
      "parameters": {
        "type": "object",
        "properties": {
          "time_entries": {
            "type": "array",
            "description": "Array of time\u2011entry objects as returned by retrieve_time_entries.",
            "items": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "rate_table": {
            "type": "object",
            "description": "Rate table object returned by fetch_rate_table.",
            "additionalProperties": true
          },
          "agreement": {
            "type": "object",
            "description": "Client agreement object returned by fetch_client_agreement.",
            "additionalProperties": true
          }
        },
        "required": [
          "time_entries",
          "rate_table",
          "agreement"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "generate_invoice_pdf",
      "description": "Transforms the structured invoice data into a PDF file that complies with legal\u2011billing formatting standards.",
      "parameters": {
        "type": "object",
        "properties": {
          "invoice_data": {
            "type": "object",
            "description": "Full invoice data structure produced by calculate_invoice.",
            "additionalProperties": true
          },
          "output_path": {
            "type": "string",
            "description": "Filesystem path where the generated PDF should be stored."
          }
        },
        "required": [
          "invoice_data",
          "output_path"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "store_invoice",
      "description": "Persists the invoice record (data + PDF location) in the firm\u2019s billing database and returns a unique invoice identifier.",
      "parameters": {
        "type": "object",
        "properties": {
          "invoice_data": {
            "type": "object",
            "description": "Invoice data generated by calculate_invoice.",
            "additionalProperties": true
          },
          "pdf_path": {
            "type": "string",
            "description": "Path to the PDF file created by generate_invoice_pdf."
          }
        },
        "required": [
          "invoice_data",
          "pdf_path"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "email_invoice",
      "description": "Emails the invoice PDF to the client\u2019s designated billing contact with a customizable subject and body.",
      "parameters": {
        "type": "object",
        "properties": {
          "recipient_email": {
            "type": "string",
            "description": "Email address of the client contact."
          },
          "subject": {
            "type": "string",
            "description": "Subject line for the email."
          },
          "body": {
            "type": "string",
            "description": "Plain\u2011text body of the email."
          },
          "pdf_path": {
            "type": "string",
            "description": "File system path to the PDF invoice to attach."
          }
        },
        "required": [
          "recipient_email",
          "subject",
          "body",
          "pdf_path"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "predict_dispute",
      "description": "Runs a trained ML model on the upcoming invoice data to estimate the likelihood of a client dispute and highlights risky line items.",
      "parameters": {
        "type": "object",
        "properties": {
          "invoice_data": {
            "type": "object",
            "description": "Projected invoice data (same shape as calculate_invoice output).",
            "additionalProperties": true
          }
        },
        "required": [
          "invoice_data"
        ],
        "additionalProperties": false
      }
    },
    {
      "name": "log_audit",
      "description": "Records an audit\u2011trail entry for compliance purposes, capturing action type, user, timestamp, and optional details.",
      "parameters": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "description": "Short description of the action (e.g., \"invoice_generated\")."
          },
          "details": {
            "type": "object",
            "description": "Arbitrary JSON with extra context.",
            "additionalProperties": true
          }
        },
        "required": [
          "action"
        ],
        "additionalProperties": false
      }
    }
  ],
  "examples": [
    {
      "description": "User requests an invoice for client C-12345 for March 2025; the assistant retrieves data, calculates the invoice, creates a PDF, stores it, emails it, and logs the operation.",
      "messages": [
        {
          "role": "system",
          "content": "You are LegalBillAI, an autonomous billing assistant that can call tools to retrieve data, compute invoices, generate PDFs, and communicate with clients."
        },
        {
          "role": "user",
          "content": "Please generate and send the March 2025 invoice for client C-12345."
        },
        {
          "role": "assistant",
          "content": "Got it. I\u2019ll gather the time entries, rate table, and agreement first.",
          "tool_calls": [
            {
              "id": "retrieve_time_entries_abc123",
              "name": "retrieve_time_entries",
              "arguments": {
                "client_id": "C-12345",
                "billing_month": "2025-03"
              }
            },
            {
              "id": "fetch_rate_table_def456",
              "name": "fetch_rate_table",
              "arguments": {
                "client_id": "C-12345"
              }
            },
            {
              "id": "fetch_client_agreement_ghi789",
              "name": "fetch_client_agreement",
              "arguments": {
                "client_id": "C-12345"
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "retrieve_time_entries_abc123",
          "content": "{\"time_entries\":[{\"date\":\"2025-03-04\",\"lawyer_id\":\"A-001\",\"activity\":\"Research\",\"hours\":2.5,\"code\":\"R01\"},{\"date\":\"2025-03-10\",\"lawyer_id\":\"A-002\",\"activity\":\"Court Appearance\",\"hours\":4,\"code\":\"C03\"}...]}"
        },
        {
          "role": "tool",
          "tool_call_id": "fetch_rate_table_def456",
          "content": "{\"rates\":{\"A-001\":350,\"A-002\":400},\"discount\":0.05,\"max_hourly_cap\":500}"
        },
        {
          "role": "tool",
          "tool_call_id": "fetch_client_agreement_ghi789",
          "content": "{\"billing_cycle\":\"monthly\",\"allowable_expenses\":[\"travel\",\"filing\"],\"tax_rate\":0.07}"
        },
        {
          "role": "assistant",
          "content": "I have the necessary data. I\u2019ll now calculate the invoice.",
          "tool_calls": [
            {
              "id": "calculate_invoice_jkl012",
              "name": "calculate_invoice",
              "arguments": {
                "time_entries": [
                  {
                    "date": "2025-03-04",
                    "lawyer_id": "A-001",
                    "activity": "Research",
                    "hours": 2.5,
                    "code": "R01"
                  },
                  {
                    "date": "2025-03-10",
                    "lawyer_id": "A-002",
                    "activity": "Court Appearance",
                    "hours": 4,
                    "code": "C03"
                  }
                ],
                "rate_table": {
                  "rates": {
                    "A-001": 350,
                    "A-002": 400
                  },
                  "discount": 0.05,
                  "max_hourly_cap": 500
                },
                "agreement": {
                  "billing_cycle": "monthly",
                  "allowable_expenses": [
                    "travel",
                    "filing"
                  ],
                  "tax_rate": 0.07
                }
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "calculate_invoice_jkl012",
          "content": "{\"invoice_id\":\"INV-2025-03-12345\",\"line_items\":[{\"description\":\"Research (R01)\",\"lawyer\":\"A-001\",\"hours\":2.5,\"rate\":350,\"amount\":875},{\"description\":\"Court Appearance (C03)\",\"lawyer\":\"A-002\",\"hours\":4,\"rate\":400,\"amount\":1520}],\"subtotal\":2395,\"discount\":119.75,\"tax\":159.85,\"total\":2435.10}"
        },
        {
          "role": "assistant",
          "content": "Invoice data calculated. Generating PDF now.",
          "tool_calls": [
            {
              "id": "generate_invoice_pdf_mno345",
              "name": "generate_invoice_pdf",
              "arguments": {
                "invoice_data": {
                  "invoice_id": "INV-2025-03-12345",
                  "line_items": [
                    {
                      "description": "Research (R01)",
                      "lawyer": "A-001",
                      "hours": 2.5,
                      "rate": 350,
                      "amount": 875
                    },
                    {
                      "description": "Court Appearance (C03)",
                      "lawyer": "A-002",
                      "hours": 4,
                      "rate": 400,
                      "amount": 1520
                    }
                  ],
                  "subtotal": 2395,
                  "discount": 119.75,
                  "tax": 159.85,
                  "total": 2435.1
                },
                "output_path": "/tmp/invoices/INV-2025-03-12345.pdf"
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "generate_invoice_pdf_mno345",
          "content": "{\"pdf_path\":\"/tmp/invoices/INV-2025-03-12345.pdf\"}"
        },
        {
          "role": "assistant",
          "content": "PDF generated. Storing invoice record and emailing the client.",
          "tool_calls": [
            {
              "id": "store_invoice_pqr678",
              "name": "store_invoice",
              "arguments": {
                "invoice_data": {
                  "invoice_id": "INV-2025-03-12345",
                  "line_items": [
                    {
                      "description": "Research (R01)",
                      "lawyer": "A-001",
                      "hours": 2.5,
                      "rate": 350,
                      "amount": 875
                    },
                    {
                      "description": "Court Appearance (C03)",
                      "lawyer": "A-002",
                      "hours": 4,
                      "rate": 400,
                      "amount": 1520
                    }
                  ],
                  "subtotal": 2395,
                  "discount": 119.75,
                  "tax": 159.85,
                  "total": 2435.1
                },
                "pdf_path": "/tmp/invoices/INV-2025-03-12345.pdf"
              }
            },
            {
              "id": "email_invoice_stu901",
              "name": "email_invoice",
              "arguments": {
                "recipient_email": "billing@clientc12345.com",
                "subject": "March 2025 Invoice - INV-2025-03-12345",
                "body": "Dear Billing Team,\n\nPlease find attached the invoice for March 2025. Let us know if you have any questions.\n\nBest regards,\nLegalBillAI",
                "pdf_path": "/tmp/invoices/INV-2025-03-12345.pdf"
              }
            },
            {
              "id": "log_audit_vwx234",
              "name": "log_audit",
              "arguments": {
                "action": "invoice_sent",
                "details": {
                  "invoice_id": "INV-2025-03-12345",
                  "client_id": "C-12345",
                  "sent_to": "billing@clientc12345.com"
                }
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "store_invoice_pqr678",
          "content": "{\"record_id\":\"DB-987654\"}"
        },
        {
          "role": "tool",
          "tool_call_id": "email_invoice_stu901",
          "content": "{\"email_status\":\"sent\",\"timestamp\":\"2025-04-01T08:12:34Z\"}"
        },
        {
          "role": "tool",
          "tool_call_id": "log_audit_vwx234",
          "content": "{\"audit_id\":\"AUD-112233\"}"
        },
        {
          "role": "assistant",
          "content": "The March 2025 invoice (INV-2025-03-12345) has been generated, stored (record ID DB-987654), and emailed to billing@clientc12345.com. Let me know if you need anything else.",
          "tool_calls": []
        }
      ]
    },
    {
      "description": "User asks for a risk assessment of potential disputes for client C-67890\u2019s upcoming April 2025 invoice; the assistant predicts dispute likelihood and presents the high\u2011risk items.",
      "messages": [
        {
          "role": "system",
          "content": "You are LegalBillAI, an autonomous assistant that can retrieve billing data, compute invoices, and run dispute\u2011risk predictions."
        },
        {
          "role": "user",
          "content": "Do you anticipate any billing disputes for client C-67890\u2019s April 2025 invoice?"
        },
        {
          "role": "assistant",
          "content": "I\u2019ll gather the upcoming time entries and calculate the projected invoice before running the risk model.",
          "tool_calls": [
            {
              "id": "retrieve_time_entries_zyx987",
              "name": "retrieve_time_entries",
              "arguments": {
                "client_id": "C-67890",
                "billing_month": "2025-04"
              }
            },
            {
              "id": "fetch_rate_table_lmn654",
              "name": "fetch_rate_table",
              "arguments": {
                "client_id": "C-67890"
              }
            },
            {
              "id": "fetch_client_agreement_opq321",
              "name": "fetch_client_agreement",
              "arguments": {
                "client_id": "C-67890"
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "retrieve_time_entries_zyx987",
          "content": "{\"time_entries\":[{\"date\":\"2025-04-05\",\"lawyer_id\":\"B-003\",\"activity\":\"Drafting\",\"hours\":3,\"code\":\"D02\"},{\"date\":\"2025-04-12\",\"lawyer_id\":\"B-004\",\"activity\":\"Deposition\",\"hours\":5,\"code\":\"DEP1\"}]}"
        },
        {
          "role": "tool",
          "tool_call_id": "fetch_rate_table_lmn654",
          "content": "{\"rates\":{\"B-003\":300,\"B-004\":320},\"discount\":0,\"max_hourly_cap\":400}"
        },
        {
          "role": "tool",
          "tool_call_id": "fetch_client_agreement_opq321",
          "content": "{\"billing_cycle\":\"monthly\",\"allowable_expenses\":[\"travel\"],\"tax_rate\":0.06}"
        },
        {
          "role": "assistant",
          "content": "Now calculating the projected invoice.",
          "tool_calls": [
            {
              "id": "calculate_invoice_rst432",
              "name": "calculate_invoice",
              "arguments": {
                "time_entries": [
                  {
                    "date": "2025-04-05",
                    "lawyer_id": "B-003",
                    "activity": "Drafting",
                    "hours": 3,
                    "code": "D02"
                  },
                  {
                    "date": "2025-04-12",
                    "lawyer_id": "B-004",
                    "activity": "Deposition",
                    "hours": 5,
                    "code": "DEP1"
                  }
                ],
                "rate_table": {
                  "rates": {
                    "B-003": 300,
                    "B-004": 320
                  },
                  "discount": 0,
                  "max_hourly_cap": 400
                },
                "agreement": {
                  "billing_cycle": "monthly",
                  "allowable_expenses": [
                    "travel"
                  ],
                  "tax_rate": 0.06
                }
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "calculate_invoice_rst432",
          "content": "{\"invoice_id\":\"PROJ-2025-04-67890\",\"line_items\":[{\"description\":\"Drafting (D02)\",\"lawyer\":\"B-003\",\"hours\":3,\"rate\":300,\"amount\":900},{\"description\":\"Deposition (DEP1)\",\"lawyer\":\"B-004\",\"hours\":5,\"rate\":320,\"amount\":1600}],\"subtotal\":2500,\"discount\":0,\"tax\":150,\"total\":2650}"
        },
        {
          "role": "assistant",
          "content": "Running dispute risk prediction on the projected invoice.",
          "tool_calls": [
            {
              "id": "predict_dispute_uvx876",
              "name": "predict_dispute",
              "arguments": {
                "invoice_data": {
                  "invoice_id": "PROJ-2025-04-67890",
                  "line_items": [
                    {
                      "description": "Drafting (D02)",
                      "lawyer": "B-003",
                      "hours": 3,
                      "rate": 300,
                      "amount": 900
                    },
                    {
                      "description": "Deposition (DEP1)",
                      "lawyer": "B-004",
                      "hours": 5,
                      "rate": 320,
                      "amount": 1600
                    }
                  ],
                  "subtotal": 2500,
                  "discount": 0,
                  "tax": 150,
                  "total": 2650
                }
              }
            }
          ]
        },
        {
          "role": "tool",
          "tool_call_id": "predict_dispute_uvx876",
          "content": "{\"dispute_risk_score\":0.84,\"high_risk_items\":[{\"description\":\"Deposition (DEP1)\",\"reason\":\"Rate exceeds client\u2011approved cap for deposition work\"}],\"recommended_action\":\"Review Deposition rate with client before finalizing invoice\"}"
        },
        {
          "role": "assistant",
          "content": "The model indicates a high dispute risk (84\u202f% confidence). The Deposition line item is flagged because its rate exceeds the client\u2011approved cap for deposition work. I recommend reviewing this rate with the client before sending the final invoice.",
          "tool_calls": []
        }
      ]
    }
  ]
}